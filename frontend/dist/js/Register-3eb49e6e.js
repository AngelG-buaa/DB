import{_ as B}from"./_plugin-vue_export-helper-383fd9f4.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                  *//* empty css                    *//* empty css                *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                       */import{_ as D}from"./logo-a60c622a.js";import{u as A,r as b,b as L,v as S,c as g,d as v,e as o,f as r,w as t,h as $,x as z,j as p,F as T,y as G,z as E,A as I,t as M,k as x,B as O,C as Y,D as Z,m as H,l as J,n as K,p as Q,s as W,q as X,E as ee}from"./index-edaa0abb.js";const le={class:"register-container"},re={class:"register-box"},ae={class:"login-link"},te={class:"dialog-footer"},oe={__name:"Register",setup(se){const V=A(),_=b(),f=b(!1),i=b(!1),l=L({userType:"student",username:"",realName:"",email:"",phone:"",password:"",confirmPassword:"",department:"",studentId:"",major:"",grade:null,employeeId:"",agreeTerms:!1}),U=S(()=>{const d=new Date().getFullYear();return Array.from({length:6},(e,s)=>d-s)}),k={userType:[{required:!0,message:"请选择用户类型",trigger:"change"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"用户名只能包含字母、数字和下划线",trigger:"blur"}],realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"},{min:2,max:10,message:"姓名长度在 2 到 10 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(d,e,s)=>{e!==l.password?s(new Error("两次输入的密码不一致")):s()},trigger:"blur"}],department:[{required:!0,message:"请选择学院",trigger:"change"}],studentId:[{validator:(d,e,s)=>{l.userType==="student"&&!e?s(new Error("请输入学号")):s()},trigger:"blur"}],major:[{validator:(d,e,s)=>{l.userType==="student"&&!e?s(new Error("请输入专业")):s()},trigger:"blur"}],grade:[{validator:(d,e,s)=>{l.userType==="student"&&!e?s(new Error("请选择年级")):s()},trigger:"change"}],employeeId:[{validator:(d,e,s)=>{l.userType==="teacher"&&!e?s(new Error("请输入工号")):s()},trigger:"blur"}]},C=async()=>{if(_.value){if(!l.agreeTerms){x.warning("请先阅读并同意用户协议");return}try{await _.value.validate(),f.value=!0;const d={username:l.username,password:l.password,real_name:l.realName,email:l.email,phone:l.phone,user_type:l.userType,department:l.department};l.userType==="student"?(d.student_id=l.studentId,d.major=l.major,d.grade=l.grade):l.userType==="teacher"&&(d.employee_id=l.employeeId),(await O(d)).code===200&&(x.success("注册成功，请等待管理员审核"),V.push("/login"))}catch(d){console.error("注册失败:",d)}finally{f.value=!1}}},j=()=>{i.value=!0},N=()=>{i.value=!1},R=()=>{V.push("/login")};return(d,e)=>{const s=Y,q=Z,u=H,n=J,m=K,y=Q,w=W,h=X,c=ee,F=$,P=z;return g(),v("div",le,[o("div",re,[e[21]||(e[21]=o("div",{class:"register-header"},[o("img",{src:D,alt:"Logo",class:"logo"}),o("h1",{class:"title"},"用户注册"),o("p",{class:"subtitle"},"创建您的账户")],-1)),r(F,{ref_key:"registerFormRef",ref:_,model:l,rules:k,class:"register-form","label-width":"80px"},{default:t(()=>[r(u,{label:"用户类型",prop:"userType"},{default:t(()=>[r(q,{modelValue:l.userType,"onUpdate:modelValue":e[0]||(e[0]=a=>l.userType=a)},{default:t(()=>[r(s,{label:"student"},{default:t(()=>[...e[15]||(e[15]=[p("学生",-1)])]),_:1}),r(s,{label:"teacher"},{default:t(()=>[...e[16]||(e[16]=[p("教师",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(u,{label:"用户名",prop:"username"},{default:t(()=>[r(n,{modelValue:l.username,"onUpdate:modelValue":e[1]||(e[1]=a=>l.username=a),placeholder:"请输入用户名",clearable:""},null,8,["modelValue"])]),_:1}),r(u,{label:"真实姓名",prop:"realName"},{default:t(()=>[r(n,{modelValue:l.realName,"onUpdate:modelValue":e[2]||(e[2]=a=>l.realName=a),placeholder:"请输入真实姓名",clearable:""},null,8,["modelValue"])]),_:1}),r(u,{label:"邮箱",prop:"email"},{default:t(()=>[r(n,{modelValue:l.email,"onUpdate:modelValue":e[3]||(e[3]=a=>l.email=a),placeholder:"请输入邮箱地址",clearable:""},null,8,["modelValue"])]),_:1}),r(u,{label:"手机号",prop:"phone"},{default:t(()=>[r(n,{modelValue:l.phone,"onUpdate:modelValue":e[4]||(e[4]=a=>l.phone=a),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),r(u,{label:"密码",prop:"password"},{default:t(()=>[r(n,{modelValue:l.password,"onUpdate:modelValue":e[5]||(e[5]=a=>l.password=a),type:"password",placeholder:"请输入密码","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),r(u,{label:"确认密码",prop:"confirmPassword"},{default:t(()=>[r(n,{modelValue:l.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=a=>l.confirmPassword=a),type:"password",placeholder:"请再次输入密码","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),r(u,{label:"学院",prop:"department"},{default:t(()=>[r(y,{modelValue:l.department,"onUpdate:modelValue":e[7]||(e[7]=a=>l.department=a),placeholder:"请选择学院",style:{width:"100%"}},{default:t(()=>[r(m,{label:"计算机科学与技术学院",value:"计算机科学与技术学院"}),r(m,{label:"电子工程学院",value:"电子工程学院"}),r(m,{label:"物理学院",value:"物理学院"}),r(m,{label:"化学学院",value:"化学学院"}),r(m,{label:"生物学院",value:"生物学院"}),r(m,{label:"数学学院",value:"数学学院"}),r(m,{label:"材料科学与工程学院",value:"材料科学与工程学院"})]),_:1},8,["modelValue"])]),_:1}),l.userType==="student"?(g(),v(T,{key:0},[r(u,{label:"学号",prop:"studentId"},{default:t(()=>[r(n,{modelValue:l.studentId,"onUpdate:modelValue":e[8]||(e[8]=a=>l.studentId=a),placeholder:"请输入学号",clearable:""},null,8,["modelValue"])]),_:1}),r(u,{label:"专业",prop:"major"},{default:t(()=>[r(n,{modelValue:l.major,"onUpdate:modelValue":e[9]||(e[9]=a=>l.major=a),placeholder:"请输入专业",clearable:""},null,8,["modelValue"])]),_:1}),r(u,{label:"年级",prop:"grade"},{default:t(()=>[r(y,{modelValue:l.grade,"onUpdate:modelValue":e[10]||(e[10]=a=>l.grade=a),placeholder:"请选择年级",style:{width:"100%"}},{default:t(()=>[(g(!0),v(T,null,G(U.value,a=>(g(),E(m,{key:a,label:`${a}级`,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})],64)):I("",!0),l.userType==="teacher"?(g(),E(u,{key:1,label:"工号",prop:"employeeId"},{default:t(()=>[r(n,{modelValue:l.employeeId,"onUpdate:modelValue":e[11]||(e[11]=a=>l.employeeId=a),placeholder:"请输入工号",clearable:""},null,8,["modelValue"])]),_:1})):I("",!0),r(u,null,{default:t(()=>[r(h,{modelValue:l.agreeTerms,"onUpdate:modelValue":e[12]||(e[12]=a=>l.agreeTerms=a)},{default:t(()=>[e[18]||(e[18]=p(" 我已阅读并同意 ",-1)),r(w,{type:"primary",onClick:j},{default:t(()=>[...e[17]||(e[17]=[p("《用户协议》",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(u,null,{default:t(()=>[r(c,{type:"primary",size:"large",loading:f.value,onClick:C,class:"register-btn"},{default:t(()=>[p(M(f.value?"注册中...":"注册"),1)]),_:1},8,["loading"])]),_:1}),r(u,null,{default:t(()=>[o("div",ae,[e[20]||(e[20]=p(" 已有账号？ ",-1)),r(w,{type:"primary",onClick:R},{default:t(()=>[...e[19]||(e[19]=[p("立即登录",-1)])]),_:1})])]),_:1})]),_:1},8,["model"])]),r(P,{modelValue:i.value,"onUpdate:modelValue":e[14]||(e[14]=a=>i.value=a),title:"用户协议",width:"600px","before-close":N},{footer:t(()=>[o("span",te,[r(c,{onClick:e[13]||(e[13]=a=>i.value=!1)},{default:t(()=>[...e[22]||(e[22]=[p("关闭",-1)])]),_:1})])]),default:t(()=>[e[23]||(e[23]=o("div",{class:"terms-content"},[o("h3",null,"高校实验室预约与设备管理系统用户协议"),o("p",null,"欢迎使用高校实验室预约与设备管理系统！在使用本系统前，请仔细阅读以下条款："),o("h4",null,"1. 服务条款"),o("p",null,"本系统为高校师生提供实验室预约、设备管理等服务。用户应遵守学校相关规定，合理使用系统功能。"),o("h4",null,"2. 用户责任"),o("p",null,"用户应保证注册信息的真实性和准确性，妥善保管账户信息，不得将账户借给他人使用。"),o("h4",null,"3. 预约规则"),o("p",null,"用户应按时使用已预约的实验室，如需取消预约请提前通知。恶意占用资源的行为将被限制使用权限。"),o("h4",null,"4. 设备使用"),o("p",null,"用户应爱护实验室设备，按规范操作。如发现设备故障应及时报告，损坏设备需承担相应责任。"),o("h4",null,"5. 隐私保护"),o("p",null,"我们承诺保护用户隐私，不会泄露用户个人信息。系统收集的数据仅用于提供服务和改进功能。"),o("h4",null,"6. 免责声明"),o("p",null,"系统维护期间可能暂停服务，由此造成的不便敬请谅解。我们不对因不可抗力导致的服务中断承担责任。"),o("p",null,"如有疑问，请联系系统管理员。")],-1))]),_:1},8,["modelValue"])])}}},xe=B(oe,[["__scopeId","data-v-5757f514"]]);export{xe as default};
